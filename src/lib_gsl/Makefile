# ==========================================
# CUSTUMIZED GSL-based UTILITY LIBRARY make
# ==========================================
#
# ==========================================
# Gnu C make to build a gsl limited Library 
# The generated library is libda_gsl.a 
# ==========================================
MAKE=make
CFLAGS=-g -DHAVE_INLINE
CC=gcc -fPIC -DSHARED_OBJECT

GSL_LIBRARY=./
GSL_BLOCK=${GSL_LIBRARY}block/
GSL_VECTOR=${GSL_LIBRARY}vector/
GSL_ERR=${GSL_LIBRARY}err/
GSL_RNG=${GSL_LIBRARY}rng/
GSL_RANDIST=${GSL_LIBRARY}randist/
GSL_CDF=${GSL_LIBRARY}cdf/
GSL_SPECFUNC=${GSL_LIBRARY}specfunc/
GSL_MATRIX=${GSL_LIBRARY}matrix/
GSL_SORT=${GSL_LIBRARY}sort/
GSL_PERMUTATION=${GSL_LIBRARY}permutation/
GSL_MULTIMIN=${GSL_LIBRARY}multimin/
GSL_HISTOGRAM=${GSL_LIBRARY}histogram/
GSL_SYS=${GSL_LIBRARY}sys/
GSL_BLAS=${GSL_LIBRARY}blas/
RANLIB=ranlib

OBJECTS = ${GSL_VECTOR}copy.o ${GSL_VECTOR}file.o ${GSL_VECTOR}init.o ${GSL_VECTOR}minmax.o ${GSL_VECTOR}oper.o ${GSL_VECTOR}prop.o ${GSL_VECTOR}reim.o ${GSL_VECTOR}subvector.o ${GSL_VECTOR}swap.o ${GSL_VECTOR}vector.o ${GSL_VECTOR}view.o ${GSL_MATRIX}copy.o ${GSL_MATRIX}file.o ${GSL_MATRIX}getset.o ${GSL_MATRIX}init.o ${GSL_MATRIX}matrix.o ${GSL_MATRIX}minmax.o  ${GSL_MATRIX}oper.o  ${GSL_MATRIX}prop.o  ${GSL_MATRIX}rowcol.o ${GSL_MATRIX}submatrix.o  ${GSL_MATRIX}swap.o ${GSL_MATRIX}view.o ${GSL_ERR}error.o ${GSL_ERR}message.o ${GSL_ERR}stream.o ${GSL_ERR}strerror.o ${GSL_RNG}borosh13.o ${GSL_RNG}cmrg.o ${GSL_RNG}coveyou.o ${GSL_RNG}default.o ${GSL_RNG}file.o ${GSL_RNG}fishman18.o ${GSL_RNG}fishman20.o ${GSL_RNG}fishman2x.o ${GSL_RNG}gfsr4.o ${GSL_RNG}inline.o ${GSL_RNG}knuthran2002.o ${GSL_RNG}knuthran2.o ${GSL_RNG}knuthran.o ${GSL_RNG}lecuyer21.o ${GSL_RNG}minstd.o ${GSL_RNG}mrg.o ${GSL_RNG}mt.o ${GSL_RNG}r250.o ${GSL_RNG}ran0.o ${GSL_RNG}ran1.o ${GSL_RNG}ran2.o ${GSL_RNG}ran3.o ${GSL_RNG}rand48.o ${GSL_RNG}rand.o ${GSL_RNG}random.o ${GSL_RNG}randu.o ${GSL_RNG}ranf.o ${GSL_RNG}ranlux.o ${GSL_RNG}ranlxd.o ${GSL_RNG}ranlxs.o ${GSL_RNG}ranmar.o ${GSL_RNG}rng.o ${GSL_RNG}schrage.o ${GSL_RNG}slatec.o ${GSL_RNG}taus113.o ${GSL_RNG}taus.o ${GSL_RNG}transputer.o ${GSL_RNG}tt.o ${GSL_RNG}types.o ${GSL_RNG}uni32.o ${GSL_RNG}uni.o ${GSL_RNG}vax.o ${GSL_RNG}waterman14.o ${GSL_RNG}zuf.o ${GSL_CDF}beta.o ${GSL_CDF}beta_inc.o ${GSL_CDF}betainv.o ${GSL_CDF}binomial.o ${GSL_CDF}cauchy.o ${GSL_CDF}cauchyinv.o ${GSL_CDF}chisq.o ${GSL_CDF}chisqinv.o ${GSL_CDF}exponential.o ${GSL_CDF}exponentialinv.o ${GSL_CDF}exppow.o ${GSL_CDF}fdist.o ${GSL_CDF}fdistinv.o ${GSL_CDF}flat.o ${GSL_CDF}flatinv.o ${GSL_CDF}gamma.o ${GSL_CDF}gammainv.o ${GSL_CDF}gauss.o ${GSL_CDF}gaussinv.o ${GSL_CDF}geometric.o ${GSL_CDF}gumbel1.o ${GSL_CDF}gumbel1inv.o ${GSL_CDF}gumbel2.o ${GSL_CDF}gumbel2inv.o ${GSL_CDF}hypergeometric.o ${GSL_CDF}laplace.o ${GSL_CDF}laplaceinv.o ${GSL_CDF}logistic.o ${GSL_CDF}logisticinv.o ${GSL_CDF}lognormal.o ${GSL_CDF}lognormalinv.o ${GSL_CDF}nbinomial.o ${GSL_CDF}pareto.o ${GSL_CDF}paretoinv.o ${GSL_CDF}pascal.o ${GSL_CDF}poisson.o ${GSL_CDF}rayleigh.o ${GSL_CDF}rayleighinv.o ${GSL_CDF}tdist.o ${GSL_CDF}tdistinv.o ${GSL_CDF}weibull.o ${GSL_CDF}weibullinv.o ${GSL_SPECFUNC}airy.o ${GSL_SPECFUNC}airy_der.o ${GSL_SPECFUNC}airy_zero.o ${GSL_SPECFUNC}atanint.o ${GSL_SPECFUNC}bessel_amp_phase.o ${GSL_SPECFUNC}bessel.o ${GSL_SPECFUNC}bessel_I0.o ${GSL_SPECFUNC}bessel_I1.o ${GSL_SPECFUNC}bessel_i.o ${GSL_SPECFUNC}bessel_In.o ${GSL_SPECFUNC}bessel_Inu.o ${GSL_SPECFUNC}bessel_J0.o ${GSL_SPECFUNC}bessel_J1.o ${GSL_SPECFUNC}bessel_j.o ${GSL_SPECFUNC}bessel_Jn.o ${GSL_SPECFUNC}bessel_Jnu.o ${GSL_SPECFUNC}bessel_K0.o ${GSL_SPECFUNC}bessel_K1.o ${GSL_SPECFUNC}bessel_k.o ${GSL_SPECFUNC}bessel_Kn.o ${GSL_SPECFUNC}bessel_Knu.o ${GSL_SPECFUNC}bessel_olver.o ${GSL_SPECFUNC}bessel_sequence.o ${GSL_SPECFUNC}bessel_temme.o ${GSL_SPECFUNC}bessel_Y0.o ${GSL_SPECFUNC}bessel_Y1.o ${GSL_SPECFUNC}bessel_y.o ${GSL_SPECFUNC}bessel_Yn.o ${GSL_SPECFUNC}bessel_Ynu.o ${GSL_SPECFUNC}bessel_zero.o ${GSL_SPECFUNC}beta.o ${GSL_SPECFUNC}beta_inc.o ${GSL_SPECFUNC}clausen.o ${GSL_SPECFUNC}coulomb_bound.o ${GSL_SPECFUNC}coulomb.o ${GSL_SPECFUNC}coupling.o ${GSL_SPECFUNC}dawson.o ${GSL_SPECFUNC}debye.o ${GSL_SPECFUNC}dilog.o ${GSL_SPECFUNC}elementary.o ${GSL_SPECFUNC}ellint.o ${GSL_SPECFUNC}elljac.o ${GSL_SPECFUNC}erfc.o ${GSL_SPECFUNC}exp.o ${GSL_SPECFUNC}expint3.o ${GSL_SPECFUNC}expint.o ${GSL_SPECFUNC}fermi_dirac.o ${GSL_SPECFUNC}gamma.o ${GSL_SPECFUNC}gamma_inc.o ${GSL_SPECFUNC}gegenbauer.o ${GSL_SPECFUNC}hermite.o ${GSL_SPECFUNC}hyperg_0F1.o ${GSL_SPECFUNC}hyperg_1F1.o ${GSL_SPECFUNC}hyperg_2F0.o ${GSL_SPECFUNC}hyperg_2F1.o ${GSL_SPECFUNC}hyperg.o ${GSL_SPECFUNC}hyperg_U.o ${GSL_SPECFUNC}laguerre.o ${GSL_SPECFUNC}lambert.o   ${GSL_SPECFUNC}log.o ${GSL_SPECFUNC}mathieu_angfunc.o ${GSL_SPECFUNC}mathieu_charv.o ${GSL_SPECFUNC}mathieu_coeff.o ${GSL_SPECFUNC}mathieu_radfunc.o ${GSL_SPECFUNC}mathieu_workspace.o ${GSL_SPECFUNC}poch.o ${GSL_SPECFUNC}pow_int.o ${GSL_SPECFUNC}psi.o ${GSL_SPECFUNC}result.o ${GSL_SPECFUNC}shint.o ${GSL_SPECFUNC}sinint.o ${GSL_SPECFUNC}synchrotron.o ${GSL_SPECFUNC}transport.o ${GSL_SPECFUNC}trig.o ${GSL_SPECFUNC}zeta.o ${GSL_RANDIST}bernoulli.c ${GSL_RANDIST}beta.c ${GSL_RANDIST}bigauss.c ${GSL_RANDIST}binomial.c ${GSL_RANDIST}binomial_tpe.c ${GSL_RANDIST}cauchy.c ${GSL_RANDIST}chisq.c ${GSL_RANDIST}dirichlet.c ${GSL_RANDIST}discrete.c ${GSL_RANDIST}erlang.c ${GSL_RANDIST}exponential.c ${GSL_RANDIST}exppow.c ${GSL_RANDIST}fdist.c ${GSL_RANDIST}flat.c ${GSL_RANDIST}gamma.c ${GSL_RANDIST}gauss.o ${GSL_RANDIST}gausstail.o ${GSL_RANDIST}gausszig.o ${GSL_RANDIST}geometric.o ${GSL_RANDIST}gumbel.o ${GSL_RANDIST}hyperg.o ${GSL_RANDIST}landau.o ${GSL_RANDIST}laplace.o ${GSL_RANDIST}levy.o ${GSL_RANDIST}logarithmic.o ${GSL_RANDIST}logistic.o ${GSL_RANDIST}lognormal.o ${GSL_RANDIST}multinomial.o ${GSL_RANDIST}mvgauss.o ${GSL_RANDIST}nbinomial.o ${GSL_RANDIST}pareto.o ${GSL_RANDIST}pascal.o ${GSL_RANDIST}poisson.o ${GSL_RANDIST}rayleigh.o ${GSL_RANDIST}shuffle.o ${GSL_RANDIST}sphere.o ${GSL_RANDIST}tdist.o ${GSL_RANDIST}weibull.o ${GSL_SORT}sort.o ${GSL_SORT}sortind.o ${GSL_SORT}sortvec.o ${GSL_SORT}sortvecind.o ${GSL_SORT}subset.o ${GSL_SORT}subsetind.o  ${GSL_PERMUTATION}canonical.o ${GSL_PERMUTATION}file.o ${GSL_PERMUTATION}init.o ${GSL_PERMUTATION}inline.o ${GSL_PERMUTATION}permutation.o ${GSL_PERMUTATION}permute.o ${GSL_MULTIMIN}conjugate_fr.o ${GSL_MULTIMIN}conjugate_pr.o ${GSL_MULTIMIN}convergence.o ${GSL_MULTIMIN}diff.o ${GSL_MULTIMIN}fdfminimizer.o ${GSL_MULTIMIN}fminimizer.o ${GSL_MULTIMIN}linear_minimize.o ${GSL_MULTIMIN}simplex2.o ${GSL_MULTIMIN}simplex.o ${GSL_MULTIMIN}steepest_descent.o ${GSL_MULTIMIN}vector_bfgs2.o ${GSL_MULTIMIN}vector_bfgs.o  ${GSL_HISTOGRAM}add2d.o ${GSL_HISTOGRAM}add.o ${GSL_HISTOGRAM}calloc_range2d.o ${GSL_HISTOGRAM}calloc_range.o ${GSL_HISTOGRAM}copy2d.o ${GSL_HISTOGRAM}copy.o ${GSL_HISTOGRAM}file2d.o ${GSL_HISTOGRAM}file.o ${GSL_HISTOGRAM}get2d.o ${GSL_HISTOGRAM}get.o ${GSL_HISTOGRAM}init2d.o ${GSL_HISTOGRAM}init.o ${GSL_HISTOGRAM}maxval2d.o ${GSL_HISTOGRAM}maxval.o ${GSL_HISTOGRAM}oper2d.o ${GSL_HISTOGRAM}oper.o ${GSL_HISTOGRAM}params2d.o ${GSL_HISTOGRAM}params.o ${GSL_HISTOGRAM}pdf2d.o ${GSL_HISTOGRAM}pdf.o ${GSL_HISTOGRAM}reset2d.o ${GSL_HISTOGRAM}reset.o ${GSL_HISTOGRAM}stat2d.o ${GSL_HISTOGRAM}stat.o ${GSL_HISTOGRAM}urand.o ${GSL_BLOCK}block.o ${GSL_BLOCK}file.o ${GSL_BLOCK}init.o  ${GSL_SYS}coerce.o ${GSL_SYS}expm1.o ${GSL_SYS}fcmp.o ${GSL_SYS}fdiv.o ${GSL_SYS}hypot.o ${GSL_SYS}infnan.o ${GSL_SYS}invhyp.o ${GSL_SYS}ldfrexp.o ${GSL_SYS}log1p.o ${GSL_SYS}minmax.o ${GSL_SYS}pow_int.o ${GSL_SYS}prec.o ${GSL_BLAS}blas.o

# Some files fail to compile for several reasons:
##${GSL_SPECFUNC}cheb_eval.o ${GSL_SPECFUNC}cheb_eval_mode.o ${GSL_SPECFUNC}legendre_source.o ${GSL_SPECFUNC}legendre_con.o ${GSL_SPECFUNC}legendre_H3d.o ${GSL_SPECFUNC}legendre_P.o ${GSL_SPECFUNC}legendre_poly.o ${GSL_SPECFUNC}legendre_Qn.o

all: 	gsl
	${AR} -q libda_gsl.a ${OBJECTS}
	${RANLIB} libda_gsl.a

gsl:
	cd ../gsl/; tar xfvz gsl-2.4.tar.gz; cd ./gsl-2.4/; ./configure; mv config.h ../../include/gsl/; cd ../../lib_gsl/; cd ${GSL_VECTOR}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_MATRIX}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_ERR}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_RNG}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_RANDIST}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_CDF}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_SPECFUNC}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_SORT}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_PERMUTATION}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_MULTIMIN}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_HISTOGRAM}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_BLOCK}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_SYS}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"; cd ../; cd ${GSL_BLAS}; ${MAKE} CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)"

clean:
	cd ${GSL_VECTOR}; ${MAKE} clean; cd ../; cd ${GSL_MATRIX}; ${MAKE} clean; cd ../; cd ${GSL_ERR}; ${MAKE} clean; cd ../; cd ${GSL_RNG}; ${MAKE} clean; cd ../; cd ${GSL_RANDIST};  ${MAKE} clean; cd ../; cd ${GSL_CDF}; ${MAKE} clean; cd ../; cd ${GSL_SPECFUNC}; ${MAKE} clean; cd ../; cd ${GSL_SORT}; ${MAKE} clean; cd ../; cd ${GSL_PERMUTATION}; ${MAKE} clean; cd ../; cd ${GSL_MULTIMIN}; ${MAKE} clean; cd ../; cd ${GSL_HISTOGRAM}; ${MAKE} clean; cd ../; cd ${GSL_BLOCK}; ${MAKE} clean; cd ../; cd ${GSL_SYS}; ${MAKE} clean; cd ../; cd ${GSL_BLAS}; ${MAKE} clean
